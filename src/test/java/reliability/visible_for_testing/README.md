## Код только для тестов AKA `@VisibleForTesting`

### Проблемы
Методы "только для тестов" провоцируют излишне подробные тесты, которые будут контролировать не внешнее поведение системы, а конкретную реализацию. 

Такие тесты в большой степени повторяют код системы, они ломаются при изменениях кода системы, утяжеляя рефакторинг, они могут отгнить и перестать контролировать код, который используется в продакшене.
### Теория
Тесты должны проверять систему, пользуясь её публичными интерфейсами. В результате поведение системы фиксируется тестами, а внутренность системы свободно можно рефакторить, не опасаясь того, что поведение будет сломано (об этом заботятся тесты).

### Что делать
В тестах использовать только общедоступный публичный интерфейс системы.

Может потребоваться рефакторинг. Обычно помогает инжектирование зависимостей.